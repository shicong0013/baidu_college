<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000;"></div>
    <button id="fade-btn">淡出</button>
    <script>
        var obj = document.getElementById("fade-obj"),
            btn = document.getElementById("fade-btn"),
            num = 100,
            inSet,
            outSet;
        
        btn.onclick = function(){
            if (num > 99){
                fadeOut();
            }else{
                fadeIn();
            };
        };
        /*   
        // 使用 setTimeout 实现 
        function fadeIn(){
            inSet = setTimeout(function(){
                btn.disabled = true;
                num++;
                obj.style.opacity = num/100;
                if (num > 99){
                    btn.innerHTML = "淡出";
                    btn.disabled = false;
                }else{
                    setTimeout(fadeIn(),50);
                }

            },50)
        };

        function fadeOut(){
            outSet = setTimeout(function(){
                btn.disabled = true;
                num--;
                obj.style.opacity = num/100;
                if (num < 1){
                    btn.innerHTML = "淡入";
                    btn.disabled = false;
                }else{
                    setTimeout(fadeOut(),50);
                }
            },50);
        };
        */
        //使用setInterval实现
        function fadeOut(){
            outSet = setInterval(function(){
                btn.disabled = true;
                num--;
                obj.style.opacity = num/100;
                if (num < 1){
                    btn.innerHTML = "淡入";
                    btn.disabled = false;
                    clearInterval(outSet);
                }
            },25)
        };

        function fadeIn(){
            inSet = setInterval(function(){
                btn.disabled = true;
                num++;
                obj.style.opacity = num/100;
                if (num > 99){
                    btn.innerHTML = "淡出";
                    btn.disabled = false;
                    clearInterval(inSet);
                };
            },25);
        };
    </script>
</body>
</html>